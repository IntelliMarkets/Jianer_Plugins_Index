# 天气查询插件文档-心知天气

## 🌤️ 概述

这是一个基于消息事件的天气查询插件，当用户发送特定格式的消息时，它会调用心知天气API获取天气信息，并以可爱风格回复用户。插件还会记录每个用户的使用次数，数据保存在本地JSON文件中。
基于“Weather”插件修改，将聚合数据API替换为心知天气API，并且增加了部分提示（注：心知天气提供免费api，但是仅支持精确到市的查询）

## 📦 功能特性

- **实时天气查询**：获取指定城市的实时天气信息
- **天气预报**：提供今明后三天的天气预测
- **可爱风格回复**：使用颜文字和emoji增强用户体验
- **使用次数记录**：记录每个用户的查询次数
- **智能提示**：根据天气状况给出生活建议
- **错误友好处理**：网络错误时提供可爱提示

## 🛠️ 安装与配置

### 依赖安装

```
pip install requests（没有，请放心食用）
```

### API密钥配置
免费key领取https://www.seniverse.com/
登录 => 控制台 => 产品管理 => 添加产品 => 免费版 => 免费申请
产品管理 => 免费版 => 密钥管理 => API密钥 => 添加密钥 => 私钥旁边的小眼睛 => 复制私钥   即可
在插件代码中替换您的心知API密钥：

```
ctrl+f查找代码中的下面字段
API_KEY = 'xxx'  # 替换为您的实际API密钥，心知天气API
```

## 📝 使用方法

### 基础命令

```
[唤醒机器人的命令，如-]天气 [城市名]
-天气 北京
-天气 上海
注：

### 响应示例

```
喵~ 北京的实时天气来咯！✧٩(ˊωˋ*)و✧
✨ 这是你本月第 1 次查询天气啦！
☀️ 今天是大晴天，晴！心情也要阳光起来呀！
🌡️ 温度：28°C (热乎乎的，记得防晒补水哦！☀️)
🍃 风儿：微风 轻轻吹级 (记得带伞或帽子哦！)
💧 今天的湿度：84% (注意补水哦~)

【生活指数小贴士】
🌞 紫外线：中等，属中等强度紫外线辐射天气，外出时建议涂擦SPF高于15、PA+的防晒护肤品，戴帽子、太阳镜。
🌫️ 空气污染扩散：较差，气象条件较不利于空气污染物稀释、扩散和清除，请适当减少室外活动时间。
😊 舒适度：较不舒适，白天天气多云，同时会感到有些热，不太舒适。
☔ 雨伞建议：不带伞，天气较好，不会降水，因此您可放心出门，无须带雨伞。
☀️ 明天会是 多云, 温度在 24~33℃ 之间哦! (｡･ω･｡)ﾉ♡
🌤️ 后天呢, 多云, 温度大约 25~33℃~ (＾▽＾)
```

## 💾 数据存储

插件会记录每个用户的使用次数，数据保存在以下路径：

Jianer_QQ_bot\data\weather

存储文件会以json格式保存

- `count`: 用户总使用次数
- `last_used`: 最后使用日期（YYYY-MM-DD格式）

## ⚙️ 自定义配置

| 配置项             | 说明            | 默认值            |
| :----------------- | :-------------- | :---------------- |
| `reminder`         | 命令前缀符号    | `-`               |
| `API_KEY`          | 心知天气API密钥 | 需替换            |
| `WEATHER_DATA_DIR` | 数据存储目录    | `../data/weather` |

